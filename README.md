# Infinity Platform - Frontend

Система управления платформой Infinity с рулеткой призов.

## Технологии

- React 18
- TypeScript
- Vite
- React Router
- Zustand (управление состоянием)
- Axios (HTTP клиент)
- React Input Mask (маски ввода)
- QRCode.react (генерация QR-кодов)

## Установка

```bash
npm install
```

## Настройка

1. Создайте файл `.env` в корне проекта:
```bash
VITE_API_BASE_URL=http://localhost:3000/api
```

2. Убедитесь, что бэкенд сервер запущен на порту 3000 (или измените URL в `.env`)

## Запуск

```bash
npm run dev
```

Приложение будет доступно по адресу `http://localhost:5173`

## Структура проекта

```
src/
├── components/          # Переиспользуемые компоненты
│   ├── ProtectedRoute.tsx
│   ├── Roulette.tsx
│   └── Skeleton.tsx
├── config/             # Конфигурация
│   └── api.ts          # Настройки API
├── pages/              # Страницы приложения
│   ├── AdminDashboard.tsx
│   ├── AuthPage.tsx
│   ├── ClubDashboard.tsx
│   ├── PlayerDashboard.tsx
│   └── SpinPage.tsx
├── services/           # API сервисы
│   └── api.ts          # Все методы для работы с API
├── store/              # Управление состоянием
│   └── useStore.ts     # Zustand store с интеграцией API
├── types/              # TypeScript типы
│   └── index.ts
└── utils/              # Утилиты
    └── transformers.ts  # Трансформеры данных бэкенда
```

## Роли и функционал

### Игрок
- Регистрация/авторизация по телефону (код: 0000)
- Получение 10 баллов за регистрацию
- Сканирование QR-кода Infinity
- Прокрутка рулетки (стоимость: 20 баллов)
- Просмотр баланса и истории транзакций
- Просмотр выигранных призов

### Infinity
- Личный кабинет с статистикой
- Просмотр игроков Infinity
- Управление призами (подтверждение/выдача)
- Генерация QR-кода для игроков

### Администратор
- Управление Infinity
- Управление пользователями
- Управление призами
- Настройка рулетки (до 25 слотов)
- Установка вероятностей выпадения призов
- Просмотр аналитики

## Особенности

- Интеграция с бэкенд API через axios
- JWT аутентификация с автоматическим обновлением токенов
- Реакт маски для ввода телефона и кода
- Скелетоны для загрузки
- Адаптивный дизайн
- Градиентный UI
- Обработка ошибок и состояний загрузки

## Примечания

- Код подтверждения для всех номеров: **0000**
- Баланс за регистрацию: **10 баллов**
- Стоимость прокрутки: **20 баллов**
- Максимум слотов в рулетке: **25**

## Интеграция с бэкендом

Фронтенд полностью интегрирован с бэкенд API:

- **API сервисы** (`src/services/api.ts`) - все методы для работы с API
- **Трансформеры** (`src/utils/transformers.ts`) - преобразование данных бэкенда в типы фронтенда
- **Store** (`src/store/useStore.ts`) - управление состоянием с использованием реальных API
- **Автоматическая аутентификация** - токены сохраняются и автоматически добавляются к запросам
- **Обработка ошибок** - автоматический редирект на страницу авторизации при истечении токена

## Структура API

Все эндпоинты соответствуют документации бэкенда:
- `/api/players/*` - эндпоинты для игроков
- `/api/clubs/*` - эндпоинты для клубов
- `/api/admin/*` - эндпоинты для администраторов

## Следующие шаги

1. Интегрировать реальное сканирование QR-кодов (библиотека html5-qrcode уже установлена)
2. Добавить WebSocket для обновлений в реальном времени
3. Улучшить обработку ошибок и уведомления пользователя
4. Добавить валидацию форм
